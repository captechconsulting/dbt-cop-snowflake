version: 2

sources:
  - name: tpch_sf1
    database: snowflake_sample_data
    schema: tpch_sf1
    tables:
      - name: customer
      - name: lineitem
      - name: nation
      - name: orders
      - name: part
      - name: partsupp
      - name: region
      - name: supplier

models:
  - name: stg_tpch_sf1__customers
    description: "Customers table including customer details"
    columns:
      - name: customer_key
        description: "Primary key for customers"
        tests:
          - unique
          - not_null
      - name: customer_name
        description: "Customer name"
      - name: customer_address
        description: "Customer address"
      - name: customer_nation_key
        description: "Primary key for nation"
      - name: customer_phone
        description: "Customer phone number"
      - name: customer_ACCOUNT_BALANCE
        description: "Account balance"
      - name: customer_market_segment
        description: "Market segment"
      - name: customer_comment
        description: "Comments about the customer"

  - name: stg_tpch_sf1__orders
    description: "Orders table including order details"
    columns:
      - name: order_key
        description: "Primary key for orders"
        tests:
          - unique
          - not_null
      - name: customer_key
        description: "Foreign key referencing customers"
        tests:
          - relationships:
              to: source('tpch_sf1', 'customer')
              field: c_custkey
      - name: order_status
        description: "Order status"
      - name: total_price
        description: "Total price of the order"
      - name: order_date
        description: "Date the order was placed"
      - name: order_priority
        description: "Priority of the order"
      - name: clerk
        description: "Clerk who processed the order"
      - name: ship_priority
        description: "Shipping priority"
      - name: order_comment
        description: "Comments about the order"

  - name: stg_tpch_sf1__lineitems
    description: "Line items table including details of each item in the orders"
    columns:
      - name: order_key
        description: "Foreign key referencing orders"
        tests:
          - relationships:
              to: source('tpch_sf1', 'orders')
              field: o_orderkey
      - name: part_key
        description: "Foreign key referencing parts"
        tests:
          - relationships:
              to: source('tpch_sf1', 'part')
              field: p_partkey
      - name: supplier_key
        description: "Foreign key referencing suppliers"
        tests:
          - relationships:
              to: source('tpch_sf1', 'supplier')
              field: s_suppkey
      - name: line_number
        description: "Line item number"
      - name: quantity
        description: "Quantity ordered"
      - name: extended_price
        description: "Extended price of the line item"
      - name: discount
        description: "Discount applied to the line item"
      - name: tax
        description: "Tax applied to the line item"
      - name: return_flag
        description: "Return flag"
      - name: linestatus
        description: "Status of the line item"
      - name: ship_date
        description: "Date of shipping"
      - name: commit_date
        description: "Committed date"
      - name: receipt_date
        description: "Receipt date"
      - name: ship_instructions
        description: "Shipping instructions"
      - name: ship_mode
        description: "Shipping mode"
      - name: line_comment
        description: "Comments about the line item"

  - name: stg_tpch_sf1__nations
    description: "Nation table including details of each nation"
    columns:
      - name: nation_key
        description: "Primary key for nation"
        tests:
          - unique
          - not_null
      - name: nation_name
        description: "Nation name"
      - name: nation_region_key
        description: "Foreign key referencing region"
      - name: nation_comment
        description: "Comments about the nation"

  - name: stg_tpch_sf1__parts
    description: "Part table including details of each part"
    columns:
      - name: part_key
        description: "Primary key for part"
        tests:
          - unique
          - not_null
      - name: part_name
        description: "Part name"
      - name: part_mfgr
        description: "Manufacturer"
      - name: part_brand
        description: "Brand"
      - name: part_type
        description: "Type"
      - name: part_size
        description: "Size"
      - name: part_container
        description: "Container"
      - name: part_retail_price
        description: "Retail price"
      - name: part_comment
        description: "Comments about the part"

  - name: stg_tpch_sf1__partsupps
    description: "Part supplier table including details of each part supplier"
    columns:
      - name: part_key
        description: "Foreign key referencing part"
        tests:
          - relationships:
              to: source('tpch_sf1', 'part')
              field: p_partkey
      - name: supplier_key
        description: "Foreign key referencing supplier"
        tests:
          - relationships:
              to: source('tpch_sf1', 'suppliers')
              field: s_suppkey
      - name: available_quantity
        description: "Available quantity"
      - name: supply_cost
        description: "Supply cost"
      - name: part_supply_comment
        description: "Comments about the part supplier"

  - name: stg_tpch_sf1__regions
    description: "Region table including details of each region"
    columns:
      - name: region_key
        description: "Primary key for region"
        tests:
          - unique
          - not_null
      - name: region_name
        description: "Region name"
      - name: region_comment
        description: "Comments about the region"

  - name: stg_tpch_sf1__suppliers
    description: "Supplier table including details of each supplier"
    columns:
      - name: supplier_key
        description: "Primary key for supplier"
        tests:
          - unique
          - not_null
      - name: supplier_name
        description: "Supplier name"
      - name: supplier_address
        description: "Supplier address"
      - name: supplier_nation_key
        description: "Foreign key referencing nation"
        tests:
          - relationships:
              to: source('tpch_sf1', 'nation')
              field: n_nationkey
      - name: supplier_phone
        description: "Supplier phone number"
      - name: supplier_account_balance
        description: "Account balance"
      - name: supplier_comment
        description: "Comments about the supplier"
